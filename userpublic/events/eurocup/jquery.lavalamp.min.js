/*!
 * Lava Lamp
 * http://lavalamp.magicmediamuse.com/
 *
 * Author
 * Richard Hung
 * http://www.magicmediamuse.com/
 *
 * Version
 * 1.0.8
 * 
 * Copyright (c) 2014 Richard Hung.
 * 
 * License
 * Lava Lamp by Richard Hung is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License.
 * http://creativecommons.org/licenses/by-nc/3.0/deed.en_US
 */
(function(n){"use strict";var r={init:function(r){var e={easing:"swing",duration:700,margins:!1,setOnClick:!1,activeObj:".active",autoUpdate:!1,updateTime:100,enableHover:!0,delayOn:0,delayOff:0,enableFocus:!1,deepFocus:!1};return r=n.extend({},e,r),this.each(function(){var c=r.margins,g=r.setOnClick,nt=r.activeObj,tt=r.autoUpdate,it=r.updateTime,rt=r.enableHover,w=r.delayOn,b=r.delayOff,ut=r.enableFocus,ft=r.deepFocus,e=n(this),l=e.children(),o=e.children(nt),k,s,h,d;o.length==0&&(o=l.eq(0)),e.data({lavalampActive:o,isAnim:!1,settings:r}),e.addClass("lavalamp").css({position:"relative"}),k=n('<div class="lavalamp-object" />').prependTo(e).css({position:"absolute"}),l.addClass("lavalamp-item").css({zIndex:5,position:"relative"});var et=o.outerWidth(c),ot=o.outerHeight(c),a=o.position().top,v=o.position().left,y=o.css("marginTop"),p=o.css("marginLeft");if(c||(p=parseInt(p),y=parseInt(y),v=v+p,a=a+y),k.css({width:et,height:ot,top:a,left:v}),s=!1,h=!0,u=function(){var t=n(this);s=!0,setTimeout(function(){s&&h&&e.lavalamp("anim",t)},w)},f=function(n){n=e.data("lavalampActive"),s=!1,setTimeout(function(){!s&&h&&e.lavalamp("anim",n)},b)},t=function(){var t=n(this);t.hasClass("lavalamp-item")||(t=t.parents(".lavalamp-item")),h=!1,setTimeout(function(){e.lavalamp("anim",t)},w),console.log("in")},i=function(){h=!0;var n=e.data("lavalampActive");console.log(n),setTimeout(function(){e.lavalamp("anim",n)},b),console.log("out")},rt){e.on("mouseenter",".lavalamp-item",u);e.on("mouseleave",".lavalamp-item",f)}if(ut){e.on("focusin",".lavalamp-item",t);e.on("focusout",".lavalamp-item",i)}if(ft){e.on("focusin",".lavalamp-item *",t);e.on("focusout",".lavalamp-item *",i)}g&&l.click(function(){o=n(this),e.data("lavalampActive",o).lavalamp("update")}),tt&&(d=setInterval(function(){var n=e.data("isAnim");s==!1&&n==!1&&e.lavalamp("update")},it),e.data("updateInterval",d))})},destroy:function(){return this.each(function(){var r=n(this),e=r.data("settings"),s=r.children(".lavalamp-item"),h=e.enableHover,c=e.enableFocus,l=e.deepFocus,a=e.autoUpdate,o;h&&(r.off("mouseenter",".lavalamp-item",u),r.off("mouseleave",".lavalamp-item",f)),c&&(r.off("focusin",".lavalamp-item",t),r.off("focusout",".lavalamp-item",i)),l&&(r.off("focusin",".lavalamp-item *",t),r.off("focusout",".lavalamp-item *",i)),r.removeClass("lavalamp"),s.removeClass("lavalamp-item"),a&&(o=r.data("updateInterval"),clearInterval(o)),r.children(".lavalamp-object").remove(),r.removeData()})},update:function(){return this.each(function(){var t=n(this),i=t.children(":not(.lavalamp-object)"),r=t.data("lavalampActive");i.addClass("lavalamp-item").css({zIndex:5,position:"relative"}),t.lavalamp("anim",r)})},anim:function(n){var t=this,i=t.data("settings"),s=i.duration,h=i.easing,r=i.margins,c=t.children(".lavalamp-object"),l=n.outerWidth(r),a=n.outerHeight(r),u=n.position().top,f=n.position().left,e=n.css("marginTop"),o=n.css("marginLeft");r||(o=parseInt(o),e=parseInt(e),f=f+o,u=u+e),t.data("isAnim",!0),c.stop(!0,!1).animate({width:l,height:a,top:u,left:f},s,h,function(){t.data("isAnim",!1)})}},u,f,t,i;n.fn.lavalamp=function(t){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.lavalamp");else return r.init.apply(this,arguments)}})(jQuery)